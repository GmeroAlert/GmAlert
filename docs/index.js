!function(){"use strict";function e(e,t){e.addEventListener("animationend",(e=>{t(e.animationName)}))}function t(e,t){e.style.animationName=t}function n(e){return`gmal-${e}`}function o(e){return`var(--${n(e)})`}function s(e,...t){const n=document.createElement(e);return n.classList.add(...t),n}function i(...e){return s("div",...e)}const c=()=>{let e=l(".gmal");return e||(e=i("gmal"),document.body.append(e)),e};function a(e,t){const n=e.style.cssText.split(";");n.pop(),e.style.cssText=`${n.concat(t).join(";")};`}function r(e=!0){const t=document.body;var n;e?a(t,["overflow: hidden",`padding-right: ${window.innerWidth-document.documentElement.clientWidth}px`]):(n=t,["overflow","padding-right"].forEach((e=>{n.style.removeProperty(e)})))}function l(e,t=document.body){return t.querySelector(e)}const d="currentColor",u=`style="fill:${d}"`,m="stroke-linecap:round;stroke-linejoin:round;stroke-width:2px",p=`style="fill:none;stroke:${d};${m}"`,$=(e,t=12,n=12)=>`<circle cx="12" cy="${t}" r="${n}" style="fill:${e}"/>`,f=(e,t="",n=24)=>{return`<svg class="${t}" ${o=n,`viewBox="0 0 ${o} ${o}"`} style="width:1em;height:1em;vertical-align:baseline">${e}</svg>`;var o},h=(e,t)=>`<path d="${e}" ${t}/>`,v=(e=!1)=>{const t=`${p} ${e?'transform="translate(-4 -4)"':""}`;return`${h("M16,8,8,16",t)}${h("M8,8l8,8",t)}`},g=f(v(!0),"",16),y=e=>f(`${h("M1,12A11,11,0,0,0,12,23h0A11,11,0,0,0,12,1",`style="fill:none;stroke:${e};${m}"`)}${h("M18.5,12A6.5,6.5,0,1,0,12,18.5h0",`style="fill:none;stroke:${e};${m}"`)}`,n("spin")),C=y(o("loading")),w=[e=>f(`${$(e)}${h("M12,17.5a1,1,0,0,1-1-1v-5h-.5a1,1,0,0,1,0-2H12a1,1,0,0,1,1,1v6A1,1,0,0,1,12,17.5Z",u)}${h("M14,18.5H10a1,1,0,0,1,0-2h4a1,1,0,0,1,0,2Z",u)}${$(d,6,1.5)}`),e=>f(`${$(e)}${h("M12,19.5A1.5,1.5,0,1,0,10.5,18,1.5,1.5,0,0,0,12,19.5Z",u)}${h("M12,14a1.5,1.5,0,0,1-1.5-1.5v-7a1.5,1.5,0,0,1,3,0v7A1.5,1.5,0,0,1,12,14Z",u)}`),e=>f(`${$(e)}${v()}`),e=>f(`${h("M12,1l3,2.1H18.8L20,6.5l3,2.1L21.83,12,23,15.4l-3,2.1L18.8,20.9H15L12,23,9,20.9H5.2L4,17.5,1,15.4,2.17,12,1,8.6,4,6.5,5.2,3.1H9Z",`style="fill:${e};stroke:${e};${m}"`)}${h("M7.5,12l3,3,6-6",p)}`),y],x=["info","warn","error","success","loading"];function b(e,t,o){return`class="${n("aniicon")} ${n(t)} ${e?n("dense"):""} ${o}"`}const k=`<div class="${n("ani-wrap")}"></div>`;function L(e,t=!1,o=""){switch(e){case"success":return function(e=!1,t=""){return`<div ${b(e,"ok-icon",t)}>${k}<div class="${n("ok-line")} ${n("line-tip")}"></div><div class="${n("ok-line")} ${n("line-long")}"></div><div class="${n("ok-ring")}"></div></div>`}(t,o);case"error":return function(e=!1,t=""){return`<div ${b(e,"err-icon",t)}>${k}<div class="${n("err-r")}"><div class="${n("err-ll")}"></div><div class="${n("err-lr")}"></div></div></div>`}(t,o);case"warn":return function(e=!1,t=""){return`<div ${b(e,"warn-icon",t)}>${k}<div class="${n("warn-content")}">!</div></div>`}(t,o);case"info":return function(e=!1,t=""){return`<div ${b(e,"info-icon",t)}>${k}<div class="${n("info-content")}">i</div></div>`}(t,o);case"loading":return function(e=!1,t=""){return`<div ${b(e,"load-icon",t)}>${C}</div>`}(t,o);default:return""}}class M{timeout=2500;maxCount=8;activeInsts=new Map;constructor(e,t){this.type=t,this.core=e,1===t&&(this.timeout=0)}config(e){this.timeout=e.timeout||this.timeout,this.maxCount=e.maxCount||this.maxCount}fire(e){const t=this.mkMsg(e);return"loading"!==e.type&&this.sT(t,e?.timeout||this.timeout),t}sT(e,t){if(!t)return;const{$el:n}=e,o=this.mkP(e,t);o.resume(),n.onmouseenter=o.pause,n.onmouseleave=o.resume}mkP(e,t){e.progress?.remove();const{$el:o}=e,s=i(n("progress")),c=i(n("progress-bar"));s.append(c),o.append(s),c.ontransitionend=()=>{e.close(-1)};const r=()=>c.clientWidth/s.clientWidth;return e.progress={pause:()=>{a(c,["transition:none",`width:${100*r()}%`])},resume:()=>{a(c,["width:0",`transition:width ${t*r()}ms linear`])},remove:()=>{s.remove()}}}mkMsg(e){const o=`${e.content}${e.type}`;if(!this.type&&this.activeInsts.has(o)){const e=this.activeInsts.get(o);return e.count+=1,function(e,o){const s=n("count");let i=l(`.${s}`,e);i||(i=document.createElement("span"),i.classList.add(s),e.append(i)),i.innerHTML=`${o>99?"99":o}`,t(i,""),setTimeout((()=>{t(i,n("shake"))}))}(e.$el,e.count),e}const s={...e,onClosed:t=>{e?.onClosed&&e.onClosed(t)},onClose:()=>{this.activeInsts.delete(o)}},i=this.core(s);if(1===this.type||this.activeInsts.size>=this.maxCount){const e=this.activeInsts.values().next().value;e&&(e.progress?.pause(),e.close(-2))}const c={...i,id:o,count:1};return this.activeInsts.set(o,c),i.open(),c}}function T(e,t){const n=new M(e,t),o=(...e)=>n.fire(function(e){const t={content:"success",type:"success"};let n=!1;const o=e=>{switch(typeof e){case"string":n?t.type=e:(t.content=e,n=!0);break;case"number":t.timeout=e;break;case"object":Object.assign(t,e)}};for(let t=0;t<4;t++){const n=e[t];n&&o(n)}return t}(e));return o.config=n.config.bind(n),o}function H(){const e=s("i",n("close"));return e.innerHTML=g,e}function E(e,t){const o=document.createElement("button");return o.textContent=e,o.onclick=t,o.classList.add(n("alert-btn")),o}function N(o){const s=i(n("alert-box")),d=i(n("alert"));o.className&&d.classList.add(...o.className),o.style&&a(d,o.style);const u=L(o.type,!1,n("alert-icon"));if(s.append(d),o.content?d.innerHTML=`${u}<div class="${n("alert-title")}">${o.content}</div>`:d.innerHTML=u,o.text||o.html){const e=i(n("alert-content"));o.html?"string"==typeof o.html?e.innerHTML=o.html:e.append(o.html):e.textContent=o.text||"hello",d.append(e)}const m=c(),p=i=>(o.onClose(),t(d,n("alert-out")),new Promise((t=>{e(d,(e=>{e===n("alert-out")&&(s.remove(),l(`.${n("alert")}`)||r(!1),o.onClosed(i),t())}))})));if(s.onclick=e=>{o.hideClose||e.target===s&&(o.onClose(),p(0))},o.showCancel||o.showConfirm){const e=i(n("alert-btn-group"));o.showCancel&&e.append(E("取消",(()=>{p(0)}))),o.showConfirm&&e.append(E("确定",(()=>{p(1)}))),d.append(e)}if(!o.hideClose){const e=H();e.onclick=()=>{p(0)},d.append(e)}return{close:p,open:()=>{r(),m.append(s)},$el:d}}const I=T(N,1);function A(s){const r=function(e,t=""){const n=x.indexOf(e);return`<i class="${t}">${(w[n]??"")(o(e))}</i>`}(s.type,n("icon")),d=i(n("msg"));s.className&&d.classList.add(...s.className),s.style&&a(d,s.style);const u=i(n("msg-main"));d.append(u),u.innerHTML=`${r}<div class=${n("msg-content")}>${s.content}</div>`;return{open:()=>{(()=>{let e=l(`.${n("msg-box")}`);return e||(e=i(n("msg-box")),c().append(e),e)})().append(d),t(d,n("alert-in"))},close:o=>(s.onClose(),a(u,[`max-height: ${u.offsetHeight}px`]),t(d,n("msg-out")),t(u,n("msg-close")),new Promise((t=>{e(d,(e=>{e===n("msg-out")&&(d.remove(),s.onClosed(o),t())}))}))),$el:d}}const P=T(A,0);function Z(o){const s=L(o.type,!0,n("notice-icon")),r=i(n("notice"));r.innerHTML=`<div class="${n("notice-main")}">${s}<div class="${n("notice-content")}">${o.content}</div></div>`;return{open:()=>{(()=>{let e=l(`.${n("notice-box")}`);return e||(e=i(n("notice-box")),c().append(e),e)})().prepend(r),a(r,[`--mh:${r.offsetHeight+10}px`]),t(r,n("open")),setTimeout((()=>{const e=l(`.${n("notice-icon")}`,r);e&&a(e,["opacity:1"])}),300)},close:s=>(o.onClose(),t(r,n("close")),new Promise((t=>{e(r,(e=>{e===n("close")&&(r.remove(),o.onClosed(s),t())}))}))),$el:r}}const j=T(Z,0);function R(o){const s=`var(--gmal-${o.type})`,r=i(n("info"));o.className&&r.classList.add(...o.className),o.style&&a(r,o.style),r.innerHTML=`<div class="${n("info-header")}"><div class="${n("info-title")} ${"loading"===o.type?n("load"):""}" style="background:${s}">${o.title||""}</div><span style="margin-right:auto">${o.headerLeft||""}</span><span style="opacity:.7">${o.headerRight||""}</span></div><div class="${n("info-content")}">${o.content}</div>`;const d=s=>(o.onClose(),new Promise((i=>{t(r,n("info-out")),e(r,(e=>{e===n("info-out")&&(r.remove(),o.onClosed(s),i())}))})));if(!o.hideClose){const e=l(`.${n("info-header")}`,r),t=H();t.onclick=()=>{d(0)},e.append(t)}return{open:()=>{c().append(r)},close:d,$el:r}}const W=T(R,1);j.config({timeout:5e3});const O=l("#root");if(!O)throw new Error("Root element not found");function q(e,t){const n=document.createElement("button");return n.classList.add("btn"),n.textContent=e,n.onclick=t,n}function z(e){const t=i("btn-box");let n;switch(e){case"alert":default:n=I;break;case"message":n=P;break;case"notice":n=j}let o=!1;return["success","error","warn","info"].forEach((o=>{t.append(q(`${e} ${o}`,(()=>n(o,{text:`this is a ${o} message`,type:o}))))})),t.append(q(`${e} loading`,(()=>{if(o)return;o=!0;const e=n({type:"loading",content:"loading",text:"wait for 3 seconds...",onClosed(){o=!1}});setTimeout((()=>e.close().then((()=>{P("load complete")}))),3e3)}))),t}function B(e){const t=i("area"),n=document.createElement("h3");return n.textContent=e,t.append(n),t}O.innerHTML="";const S=B("Alert"),D=z("alert"),F=i("gm-label"),G=document.createElement("span");G.textContent="网站名称：";const J=document.createElement("input");F.append(G,J),J.classList.add("gm-input"),D.append(q("alert html",(()=>{I({className:["alert-html"],content:"友链申请",html:F,showConfirm:!0,onClosed(){P(""+(J.value?`你输入了：${J.value}`:"你没有输入")),J.value=""}})}))),S.append(D);const K=B("Message");K.append(z("message"));const Q=B("Notice");Q.append(z("notice"));const U=B("Information");U.append(function(){const e=i("btn-box");return["success","error","warn","info","loading"].forEach((t=>{const n=function(e,t){const n=document.createElement("button");return n.classList.add("btn"),n.textContent=e,n.onclick=t,n}(`Infomation ${t}`,(()=>{W({title:t,content:`This is a ${t} infomation`,type:t,headerLeft:"headerLeft",headerRight:"headerRight"})}));e.append(n)})),e}()),O.append(q("changeTheme",(()=>{document.documentElement.dataset.theme="dark"===document.documentElement.dataset.theme?"light":"dark"})),S,K,Q,U)}();
