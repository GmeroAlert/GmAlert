!function(){"use strict";var e={on(e,t,n,o){e.addEventListener(t,n,o)},off(e,t,n){e.removeEventListener(t,n)}};function t(t,n){e.on(t,"animationend",(e=>{n(e.animationName)}))}function n(e,t){e.style.animationName=t}function o(e){return`gmal-${e}`}function s(e,...t){const n=document.createElement(e);return n.classList.add(...t),n}function c(...e){return s("div",...e)}const i=()=>{let e=l(".gmal");return e||(e=c("gmal"),document.body.append(e)),e};function r(e,t){const n=e.style.cssText.split(";");n.pop(),e.style.cssText=`${n.concat(t).join(";")};`}function a(e=!0){const t=document.body;var n;e?r(t,["overflow: hidden",`padding-right: ${window.innerWidth-document.documentElement.clientWidth}px`]):(n=t,["overflow","padding-right"].forEach((e=>{n.style.removeProperty(e)})))}function l(e,t=document.body){return t.querySelector(e)}class d{activeInsts=new Map;constructor(e,t=2500){this.timeout=t,this.core=e}config(e){this.timeout=e.timeout||this.timeout}fire(e){const t=this.mkMsg(e);return"loading"!==e.type&&this.sT(t,e?.timeout||this.timeout),t}sT(e,t){if(!t)return;const{$el:n}=e,o=this.mkP(e,t);o.resume(),n.onmouseenter=o.pause,n.onmouseleave=o.resume}mkP(e,t){e.progress?.remove();const{$el:n}=e,s=c(o("progress")),i=c(o("progress-bar"));s.append(i),n.append(s),i.ontransitionend=()=>{e.close(-1)};const a=()=>i.clientWidth/s.clientWidth;return e.progress={pause:()=>{r(i,["transition:none",`width:${100*a()}%`])},resume:()=>{r(i,["width:100%",`transition:width ${t*(1-a())}ms linear`])},remove:()=>{s.remove()}}}mkMsg(e){const t=`${e.content}${e.type}`,n={...e,onClosed:t=>{e?.onClosed&&e.onClosed(t)},onClose:()=>{this.activeInsts.delete(t)}},o=this.core(n);let s=!1;const c=()=>{s||(s=!0,o.open())};n.className&&o.$el.classList.add(...n.className),n.style&&r(o.$el,n.style);const i=this.activeInsts.values().next().value;i&&(i.progress?.pause(),i.close(-2));const a={...o,close:e=>s?(s=!1,o.close(e)):Promise.resolve(),open:c};return this.activeInsts.set(t,a),c(),a}}function u(e,t){const n=new d(e,t),o=(...e)=>n.fire(function(e){const t={content:"success",type:"success"};let n=!1;const o=e=>{switch(typeof e){case"string":n?t.type=e:(t.content=e,n=!0);break;case"number":t.timeout=e;break;case"object":Object.assign(t,e)}};for(let t=0;t<4;t++){const n=e[t];n&&o(n)}return t}(e));return o.config=n.config.bind(n),o}const p='<svg viewBox="0 0 16 16"><circle cx="12" cy="12" r="12" style="fill:#e06968"/><path d="M16,8,8,16" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M8,8l8,8" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>';function m(e,t){const n=s("button");return n.textContent=e,n.onclick=t,n.classList.add(o("alert-btn")),n}let f="closed";function h(e){let s=l(`.${o("overlay")}`);if(s||(s=c(o("overlay")),i().append(s)),e){if("open"===f||"opening"===f)return;a(),f="opening",n(s,o("fade-in")),r(s,["display: block"])}else{if("closed"===f||"closing"===f)return;f="closing",n(s,o("fade-out"))}t(s,(e=>{e===o("fade-in")&&(f="open"),e===o("fade-out")&&(f="none",a(!1),r(s,["display: none"]))}))}function g(e){const r=c(o("alert"));if(e.content&&(r.innerHTML=`<div class="${o("alert-title")}">${e.content}</div>`),e.text||e.html){const t=c(o("alert-content"));e.html?"string"==typeof e.html?t.innerHTML=e.html:t.append(e.html):t.textContent=e.text||"hello",r.append(t)}const a=s=>(-2!==s&&h(!1),e.onClose(),n(r,o("alert-out")),new Promise((n=>{t(r,(t=>{t===o("alert-out")&&(r.remove(),e.onClosed(s),n())}))})));if(e.showCancel||e.showConfirm){const t=c(o("alert-btn-group"));e.showCancel&&t.append(m("取消",(()=>{a(0)}))),e.showConfirm&&t.append(m("确定",(()=>{a(1)}))),r.append(t)}if(!e.hideClose){const e=function(){const e=s("i",o("close"));return e.innerHTML=p,e}();e.onclick=()=>{a(0)},r.append(e)}return{close:a,open:()=>{h(!0),i().append(r),n(r,o("alert-in"))},$el:r}}const v=u(g,0);function y(e){const s=c(o("msg")),r=c(o("msg-main"));s.append(r),r.innerHTML=`<div class=${o("msg-content")}>${e.content}</div>`;return{open:()=>{i().append(s),n(s,o("alert-in"))},close:c=>(e.onClose(),n(s,o("alert-out")),new Promise((n=>{t(s,(t=>{t===o("alert-out")&&(s.remove(),e.onClosed(c),n())}))}))),$el:s}}const $=u(y);function w(e){const s=c(o("notice"));var a;r(s,["background:"+(a=e.type,`var(--${o(a)})`)]),s.innerHTML=`<div class="${o("notice-main")}"><div class="${o("notice-content")}">${e.content}</div></div>`;return{open:()=>{i().append(s),n(s,o("open"))},close:c=>(e.onClose(),n(s,o("close")),new Promise((n=>{t(s,(t=>{t===o("close")&&(s.remove(),e.onClosed(c),n())}))}))),$el:s}}const k=u(w);k.config({timeout:5e3});const C=l("#root");if(!C)throw new Error("Root element not found");function b(e,t){const n=document.createElement("button");return n.classList.add("btn"),n.textContent=e,n.onclick=t,n}function x(e){const t=c("btn-box");let n;switch(e){case"alert":default:n=v;break;case"message":n=$;break;case"notice":n=k}let o=!1;return["success","error","warn","info"].forEach((o=>{t.append(b(`${e} ${o}`,(()=>n(o,{text:`this is a ${o} message`,type:o}))))})),t.append(b(`${e} loading`,(()=>{if(o)return;o=!0;const e=n({type:"loading",content:"loading",text:"wait for 3 seconds...",onClosed(){o=!1}});setTimeout((()=>e.close().then((()=>{$("load complete")}))),3e3)}))),t}function E(e){const t=c("area"),n=document.createElement("h3");return n.textContent=e,t.append(n),t}C.innerHTML="";const L=E("Alert"),M=x("alert"),T=c("gm-label"),P=document.createElement("span");P.textContent="网站名称：";const H=document.createElement("input");T.append(P,H),H.classList.add("gm-input"),M.append(b("alert html",(()=>{v({className:["alert-html"],content:"友链申请",html:T,showConfirm:!0,onClosed(){$(""+(H.value?`你输入了：${H.value}`:"你没有输入")),H.value=""}})}))),L.append(M);const N=E("Message");N.append(x("message"));const j=E("Notice");j.append(x("notice"));const I=E("Information");C.append(b("changeTheme",(()=>{document.documentElement.dataset.theme="dark"===document.documentElement.dataset.theme?"light":"dark"})),L,N,j,I)}();
